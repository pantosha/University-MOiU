classdef McmfTest < matlab.unittest.TestCase
    methods (Test)
        function example(testCase)
            C = [0, 1, 0, 0, 0, 0;
                0, 0, 0, 0, 0, 3;
                0, 3, 0, 5, 0, 0;
                0, 0, 0, 0, 0, 0;
                0, 0, 4, 1, 0, 0;
                -2, 0, 3, 0, 4, 0]; % стоимости
            a = [1, -4, -5, -6, 5, 9]; % исток / сток
            X = [0, 1, 0, 0, 0, 0;
                0, 0, 0, 0, 0, 0;
                0, 3, 0, 1, 0, 0;
                0, 0, 0, 0, 0, 0;
                0, 0, 0, 5, 0, 0;
                0, 0, 9, 0, 0, 0];
            
            expC = 23;
            expX = zeros(size(C));
            expX(1, 2) = 4;
            expX(5, 4) = 6;
            expX(6, 1) = 3;
            expX(6, 3) = 5;
            expX(6, 5) = 1;
            
            [actX, actC] = mcmf(C, a, X);
            testCase.verifyEqual(actX, expX, 'AbsTol', 10^(-8));
            testCase.verifyEqual(actC, expC, 'AbsTol', 10^(-8));
        end
        
        function task1(testCase)
            C = [0, 9, 0, 0, 0, 0, 0, 5, 0;
                0, 0, 1, 0, 0, 3, 5, 0, 0;
                0, 0, 0, 0, 0, 0, 0, 0, -2;
                0, 0, -3, 0, 0, 0, 0, 0, 0;
                0, 0, 0, 6, 0, 0, 0, 0, 0;
                0, 0, 0, 0, 8, 0, 0, 0, 0;
                0, 0, -1, 4, 7, 0, 0, 0, 1;
                0, 0, 0, 0, 0, 0, 2, 0, 2;
                0, 0, 0, 0, 0, 6, 0, 0, 0];
            a = [9, 5, -4, -3, -6, 2, 2, -7, 2];
            X = [ 0, 2, 0, 0, 0, 0, 0, 7, 0;
                0, 0, 4, 0, 0, 0, 3, 0, 0;
                0, 0, 0, 0, 0, 0, 0, 0, 0;
                0, 0, 0, 0, 0, 0, 0, 0, 0;
                0, 0, 0, 3, 0, 0, 0, 0, 0;
                0, 0, 0, 0, 4, 0, 0, 0, 0;
                0, 0, 0, 0, 5, 0, 0, 0, 0;
                0, 0, 0, 0, 0, 0, 0, 0, 0;
                0, 0, 0, 0, 0, 2, 0, 0, 0];
            
            expC = 127;
            expX = [0, 0, 0, 0, 0, 0, 0, 9, 0;
                0, 0, 4, 0, 0, 1, 0, 0, 0;
                0, 0, 0, 0, 0, 0, 0, 0, 0;
                0, 0, 0, 0, 0, 0, 0, 0, 0;
                0, 0, 0, 0, 0, 0, 0, 0, 0;
                0, 0, 0, 0, 5, 0, 0, 0, 0;
                0, 0, 0, 3, 1, 0, 0, 0, 0;
                0, 0, 0, 0, 0, 0, 2, 0, 0;
                0, 0, 0, 0, 0, 2, 0, 0, 0;];
            
            [actX, actC] = mcmf(C, a, X);
            testCase.verifyEqual(actX, expX, 'AbsTol', 10^(-8));
            testCase.verifyEqual(actC, expC, 'AbsTol', 10^(-8));
        end
    end
end